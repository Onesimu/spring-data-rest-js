!function(t){function n(o){if(e[o])return e[o].exports;var r=e[o]={exports:{},id:o,loaded:!1};return t[o].call(r.exports,r,r.exports,n),r.loaded=!0,r.exports}var e={};return n.m=t,n.c=e,n.p="",n(0)}([/*!********************!*\
  !*** multi spring ***!
  \********************/
function(t,n,e){t.exports=e(3)},/*!********************!*\
  !*** ./request.js ***!
  \********************/
function(t,n){"use strict";function e(t){function e(e){var o=e;return/^https?:\/\/.+$/g.test(e)||(o=n.requestConfig.baseURL+"/"+e),o=o.replace(/\/{2,}/g,"/").replace(/:\//g,"://"),new r({url:o,method:t})}return e}function o(t){var n=t._links.self.href,e=new r({url:n,method:"GET"});return e.responseData=t,e.hasSend=!0,e}var r=function(){function t(t){this.options={headers:{}},this.hasSend=!1,this.response=null,this.error=null,Object.assign(this.options,n.requestConfig.globalFetchOptions,t)}return t.prototype.queryParam=function(t){if(null!=t){var n=[];for(var e in t)t.hasOwnProperty(e)&&n.push(e+"="+t[e]);this.options.url=this.options.url.split("?")[0]+"?"+n.join("&")}return this},t.prototype.jsonBody=function(t){return this.options.body=JSON.stringify(t),this.options.headers["Content-Type"]="application/json",this},t.prototype.formBody=function(t){var n=[];for(var e in t)t.hasOwnProperty(e)&&n.push(e+"="+t[e]);return this.options.body=n.join("&"),this.options.headers["Content-Type"]="application/x-www-form-urlencoded",this},t.prototype.send=function(){var t=this;return new Promise(function(e,o){if(t.hasSend)null==t.error?e(t.responseData):o(t.error);else{t.hasSend=!0;var r=n.requestConfig.fetchStartHook,i=n.requestConfig.fetchEndHook;r&&r(t),fetch(t.options.url,t.options).then(function(n){t.response=n;var e=n.headers.get("content-type");return null==e?Promise.resolve():/.*json.*/.test(e)?n.json():n.text()}).then(function(n){return t.responseData=n,t.response.ok?Promise.resolve(n):Promise.reject(n)}).then(function(n){i&&i(t),e(n)})["catch"](function(n){t.error=n,i&&i(t),o(t)})}})},t.prototype.follow=function(t){var e=this,o=this;return new Promise(function(r,i){function s(e){var a=t.shift();if(a){var u=e._links,c=u[a];null!=c?(c=c.href,n.get(c).send().then(function(t){s(t)})["catch"](function(t){i(t)})):(o.error="no key="+a+" in links "+JSON.stringify(u,null,4),i(this))}else r(e)}e.send().then(function(t){s(t)})["catch"](function(t){i(t)})})},t}();n.Request=r,n.requestConfig={globalFetchOptions:{},baseURL:"/",fetchStartHook:null,fetchEndHook:null},n.get=e("GET"),n.post=e("POST"),n.patch=e("PATCH"),n.put=e("PUT"),n.deleteMethod=e("DELETE"),n.mockRequest=o},/*!******************!*\
  !*** ./index.js ***!
  \******************/
function(t,n,e){"use strict";function o(t){for(var e in t)n.hasOwnProperty(e)||(n[e]=t[e])}o(e(1)),o(e(4))},/*!********************!*\
  !*** ./browser.js ***!
  \********************/
function(t,n,e){"use strict";function o(t){for(var e in t)n.hasOwnProperty(e)||(n[e]=t[e])}var r=e(2);window.spring=r,o(e(2))},/*!*******************!*\
  !*** ./entity.js ***!
  \*******************/
function(t,n,e){"use strict";function o(t){if(t instanceof Object){var n=t.constructor.prototype;return n.href&&n.href.constructor===Function}return!1}function r(t){var n=function(t){function n(){t.apply(this,arguments)}return i(n,t),n}(a);return n.entityName=t,n}var i=this&&this.__extends||function(t,n){function e(){this.constructor=t}for(var o in n)n.hasOwnProperty(o)&&(t[o]=n[o]);t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)},s=e(1);n.entityConfig={restBaseURL:"/"},n.isEntity=o;var a=function(){function t(t){this._data={},this.modifyFields=[],this.patchData(t)}return t.prototype.href=function(){var t=this._data._links;if(null!=t)return t.self.href;if(this.id)return this.constructor.entityBaseURL()+"/"+this.id;throw new Error("entity without id can't map to backend service:\n"+JSON.stringify(this))},t.prototype.get=function(t){return this._data[t]},t.prototype.set=function(t,n){this.modifyFields.push(t),this._data[t]=n},t.prototype.data=function(){return this._data},t.prototype.patchData=function(t){for(var n in t)t.hasOwnProperty(n)&&this.set(n,t[n]);try{var e=t._links.self.href.split(/\//);e=e[e.length-1],null!=e&&(this.id=e)}catch(o){}},t.prototype.create=function(){var t=this;return new Promise(function(n,e){t.constructor.translateRelationEntity(t.data()).then(function(n){return s.post(t.constructor.entityBaseURL()).jsonBody(n).send()}).then(function(e){t.patchData(e),t.modifyFields=[],n(e)})["catch"](function(t){e(t)})})},t.prototype.update=function(){var t=this;return new Promise(function(n,e){var o={};return 0==t.modifyFields.length?void n():(t.modifyFields.forEach(function(n){o.hasOwnProperty(n)||"_"===n[0]||t._data.hasOwnProperty(n)&&(o[n]=t.get(n))}),void t.constructor.translateRelationEntity(o).then(function(n){return s.patch(t.href()).jsonBody(n).send()}).then(function(e){t.patchData(e),t.modifyFields=[],n(e)})["catch"](function(t){e(t)}))})},t.prototype.save=function(){return null!=this.id?this.update():this.create()},t.prototype.remove=function(){return this.constructor.remove(this.id)},t.prototype.fetch=function(){var t=this;return new Promise(function(n,e){t.constructor.findOne(t.id).then(function(e){var o=e.data();t.patchData(o),n(o)})["catch"](function(t){e(t)})})},t.prototype.follow=function(t){var n=this;return new Promise(function(e,o){function r(n){s.mockRequest(n).follow(t).then(function(t){e(t)})["catch"](function(t){o(t)})}n.modifyFields.length>0?r(n.data()):n.fetch().then(function(){r(n.data())})})},t.entityBaseURL=function(){return n.entityConfig.restBaseURL+"/"+this.entityName},t.jsonToEntityList=function(n){var e=[],o=n._embedded[this.entityName];return o.forEach(function(n){return e.push(new t(n))}),e},t.translateRelationEntity=function(t){var n=this;return new Promise(function(e,r){if(o(t))t.save().then(function(){e(t.href())})["catch"](function(t){r(t)});else if(Array.isArray(t)){var i=[];t.forEach(function(t){return i.push(n.translateRelationEntity(t))}),Promise.all(i).then(function(t){e(t)})["catch"](function(t){r(t)})}else if(null!=t&&t.constructor===Object){var s=[],a={},u=0;for(var c in t)t.hasOwnProperty(c)&&(a[u++]=c,s.push(n.translateRelationEntity(t[c])));Promise.all(s).then(function(t){for(var n={},o=0;o<t.length;o++)n[a[o]]=t[o];e(n)})["catch"](function(t){r(t)})}else e(t)})},t.findOne=function(n,e){var o=this;if(null!=n)return new Promise(function(r,i){s.get(o.entityBaseURL()+"/"+n).queryParam(e).send().then(function(n){r(new t(n))})["catch"](function(t){i(t)})});throw new Error("require id")},t.findAll=function(t){var n=this;return new Promise(function(e,o){s.get(n.entityBaseURL()).queryParam(t).send().then(function(t){var o=n.jsonToEntityList(t);e(o)})["catch"](function(t){o(t)})})},t.search=function(n,e){var o=this;return new Promise(function(r,i){s.get(o.entityBaseURL()+"/search/"+n).queryParam(e).send().then(function(n){try{r(o.jsonToEntityList(n))}catch(e){r(new t(n))}})["catch"](function(t){i(t)})})},t.remove=function(t){return s.deleteMethod(this.entityBaseURL()+"/"+t).send()},t}();n.Entity=a,n.extend=r}]);
//# sourceMappingURL=spring.min.js.map