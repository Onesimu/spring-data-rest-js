{"version":3,"sources":["webpack:///spring.min.js","webpack:///webpack/bootstrap 68c0886585ad1ad5667b","webpack:///./request.js","webpack:///./index.js","webpack:///./browser.js","webpack:///./entity.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","buildHttpMethodFunction","method","httpRequest","path","url","test","requestConfig","baseURL","replace","Request","mockRequest","data","req","responseData","hasSend","fetchOptions","this","options","headers","response","error","Object","assign","globalFetchOptions","prototype","queryParam","obj","arr","key","hasOwnProperty","push","split","join","jsonBody","body","JSON","stringify","formBody","send","_this","Promise","resolve","reject","fetchStartHook","fetchEndHook_1","fetchEndHook","fetch","then","contentType","get","json","text","ok","err","follow","keys","self","doFollow","shift","links","post","patch","put","deleteMethod","__export","spring","window","isEntity","any","constructor","__proto__","Entity","equal","a","b","Array","isArray","length","re_1","forEach","aV","i","re","extend","entity_name","Class","_super","apply","arguments","__extends","entityName","d","__","create","request","entityConfig","restBaseURL","initData","_data","modifyFields","patchData","href","entityBaseURL","Error","set","value","oldValue","_","translateRelationEntity","update","pureChange","save","remove","resole","findOne","entity","jsonToEntityList","jsonToEntity","hasVisitedEntities","one","promiseList_1","all","promiseList","indexKeyMap_1","nowIndex","findAll","search","searchPath","exposeProperty","propertyName","defineProperty","enumerable"],"mappings":"CAAS,SAAUA,GCInB,QAAAC,GAAAC,GAGA,GAAAC,EAAAD,GACA,MAAAC,GAAAD,GAAAE,OAGA,IAAAC,GAAAF,EAAAD,IACAE,WACAE,GAAAJ,EACAK,QAAA,EAUA,OANAP,GAAAE,GAAAM,KAAAH,EAAAD,QAAAC,IAAAD,QAAAH,GAGAI,EAAAE,QAAA,EAGAF,EAAAD,QAvBA,GAAAD,KAqCA,OATAF,GAAAQ,EAAAT,EAGAC,EAAAS,EAAAP,EAGAF,EAAAU,EAAA,GAGAV,EAAA;;;ADSM,SAASI,EAAQD,EAASH,GAE/BI,EAAOD,QAAUH,qBAAuC;;;AAQnD,SAASI,EAAQD,GEzDvB,YACA,SAAAQ,GAAAC,GAQA,QAAAC,GAAAC,GACA,GAAAC,GAAAD,CAKA,OAJA,mBAAAE,KAAAF,KACAC,EAAAZ,EAAAc,cAAAC,QAAA,IAAAJ,GAEAC,IAAAI,QAAA,UAAiC,KAAAA,QAAA,cACjC,GAAAC,IAA4BL,MAAAH,WAE5B,MAAAC,GA+MA,QAAAQ,GAAAC,GACA,GAAAP,GAAAO,EAAA,iBACAC,EAAA,GAAAH,IAA2BL,MAAAH,OAAA,OAG3B,OAFAW,GAAAC,aAAAF,EACAC,EAAAE,SAAA,EACAF,EAlNA,GAAAH,GAAA,WAIA,QAAAA,GAAAM,GAIAC,KAAAC,SACAC,YAKAF,KAAAF,SAAA,EAKAE,KAAAG,SAAA,KAIAH,KAAAI,MAAA,KACAC,OAAAC,OAAAN,KAAAC,QAAAzB,EAAAc,cAAAiB,mBAAAR,GA8IA,MAxIAN,GAAAe,UAAAC,WAAA,SAAAC,GACA,SAAAA,EAAA,CACA,GAAAC,KACA,QAAAC,KAAAF,GACAA,EAAAG,eAAAD,IACAD,EAAAG,KAAAF,EAAA,IAAAF,EAAAE,GAGAZ,MAAAC,QAAAb,IAAAY,KAAAC,QAAAb,IAAA2B,MAAA,YAAAJ,EAAAK,KAAA,KAEA,MAAAhB,OAOAP,EAAAe,UAAAS,SAAA,SAAAP,GAGA,MAFAV,MAAAC,QAAAiB,KAAAC,KAAAC,UAAAV,GACAV,KAAAC,QAAAC,QAAA,mCACAF,MAQAP,EAAAe,UAAAa,SAAA,SAAAX,GACA,GAAAC,KACA,QAAAC,KAAAF,GACAA,EAAAG,eAAAD,IACAD,EAAAG,KAAAF,EAAA,IAAAF,EAAAE,GAKA,OAFAZ,MAAAC,QAAAiB,KAAAP,EAAAK,KAAA,KACAhB,KAAAC,QAAAC,QAAA,oDACAF,MAUAP,EAAAe,UAAAc,KAAA,WACA,GAAAC,GAAAvB,IACA,WAAAwB,SAAA,SAAAC,EAAAC,GACA,GAAAH,EAAAzB,QACA,MAAAyB,EAAAnB,MACAqB,EAAAF,EAAA1B,cAGA6B,EAAAH,EAAAnB,WAGA,CACAmB,EAAAzB,SAAA,CACA,IAAA6B,GAAAnD,EAAAc,cAAAqC,eAAAC,EAAApD,EAAAc,cAAAuC,YACAF,MAAAJ,GACAO,MAAAP,EAAAtB,QAAAb,IAAAmC,EAAAtB,SAAA8B,KAAA,SAAA5B,GACAoB,EAAApB,UACA,IAAA6B,GAAA7B,EAAAD,QAAA+B,IAAA,eACA,cAAAD,EACAR,QAAAC,UAGA,WAAApC,KAAA2C,GAEA7B,EAAA+B,OAGA/B,EAAAgC,SAGiBJ,KAAA,SAAApC,GAEjB,MADA4B,GAAA1B,aAAAF,EACA4B,EAAApB,SAAAiC,GACAZ,QAAAC,QAAA9B,GAGA6B,QAAAE,OAAA/B,KAEiBoC,KAAA,SAAApC,GACjBiC,KAAAL,GACAE,EAAA9B,KAzBAmC,SA0BiB,SAAAO,GACjBd,EAAAnB,MAAAiC,EACAT,KAAAL,GACAG,EAAAH,SAYA9B,EAAAe,UAAA8B,OAAA,SAAAC,GACA,GAAAhB,GAAAvB,KACAwC,EAAAxC,IACA,WAAAwB,SAAA,SAAAC,EAAAC,GACA,QAAAe,GAAA9C,GACA,GAAAiB,GAAA2B,EAAAG,OACA,IAAA9B,EAAA,CACA,GAAA+B,GAAAhD,EAAA,OACAP,EAAAuD,EAAA/B,EACA,OAAAxB,GACAA,IAAA,KACAZ,EAAAyD,IAAA7C,GAAAkC,OAAAS,KAAA,SAAApC,GACA8C,EAAA9C,KADAnB,SAEyB,SAAAgE,GACzBd,EAAAc,OAIAA,EAAApC,MAAA,UAAAQ,EAAA,aAAAO,KAAAC,UAAAuB,EAAA,QACAjB,EAAA1B,WAIAyB,GAAA9B,GAGA4B,EAAAD,OAAAS,KAAA,SAAApC,GACA8C,EAAA9C,KADA4B,SAEa,SAAAiB,GACbd,EAAAc,QAIA/C,IAEAjB,GAAAiB,UACAjB,EAAAc,eACAiB,sBACAhB,QAAA,IACAoC,eAAA,KACAE,aAAA,MAMArD,EAAAyD,IAAAjD,EAAA,OAKAR,EAAAoE,KAAA5D,EAAA,QAKAR,EAAAqE,MAAA7D,EAAA,SAKAR,EAAAsE,IAAA9D,EAAA,OAMAR,EAAAuE,aAAA/D,EAAA,UAYAR,EAAAkB;;;AFmEM,SAASjB,EAAQD,EAASH,GG1ShC,YACA,SAAA2E,GAAAnE,GACA,OAAAE,KAAAF,GAAAL,EAAAqC,eAAA9B,KAAAP,EAAAO,GAAAF,EAAAE,IAEAiE,EAAA3E,kBAAA,IACA2E,EAAA3E,iBAAA;;;AHoTM,SAASI,EAAQD,EAASH,GIzThC,YACA,SAAA2E,GAAAnE,GACA,OAAAE,KAAAF,GAAAL,EAAAqC,eAAA9B,KAAAP,EAAAO,GAAAF,EAAAE,IAEA,GAAAkE,GAAA5E,gBAAA,EACA6E,QAAA,OAAAD,EACAD,EAAA3E,gBAAA;;;AJmUM,SAASI,EAAQD,EAASH,GKzUhC,YAeA,SAAA8E,GAAAC,GACA,GAAAA,YAAA/C,QAEA,IADA,GAAAG,GAAA4C,EAAAC,YAAA7C,UAAA8C,UACA9C,YAAAH,SAAA,CACA,GAAAG,EAAA6C,cAAAE,EACA,QAGA/C,KAAA8C,UAIA,SASA,QAAAE,GAAAC,EAAAC,GACA,SAAAD,UAAAC,GAAA,CACA,GAAAP,EAAAM,IAAAN,EAAAO,GACA,MAAAD,GAAA/E,IAAAgF,EAAAhF,IAIA8E,EAAAC,EAAA9D,OAAA+D,EAAA/D,OAGA,IAAAgE,MAAAC,QAAAH,IAAAE,MAAAC,QAAAF,IACA,GAAAD,EAAAI,SAAAH,EAAAG,OAAA,CACA,GAAAC,IAAA,CAIA,OAHAL,GAAAM,QAAA,SAAAC,EAAAC,GACAH,KAAAN,EAAAQ,EAAAN,EAAAO,MAEAH,OAGA,MAAAL,YAAApD,SAAAqD,YAAArD,SAYA,MAAAoD,IAAAC,CAXA,QAAA9C,KAAA6C,GAAA,CACA,GAAAS,IAAA,CACA,KAAAT,EAAA5C,eAAAD,KAAA8C,EAAA7C,eAAAD,GAIA,QAHAsD,MAAAV,EAAAC,EAAA7C,GAAA8C,EAAA9C,MAWA,SA0YA,QAAAuD,GAAAC,GACA,GAAAC,GAAA,SAAAC,GAEA,QAAAD,KACAC,EAAAC,MAAAvE,KAAAwE,WAEA,MAJAC,GAAAJ,EAAAC,GAIAD,GACKd,EAKL,OADAc,GAAAK,WAAAN,EACAC,EA3dA,GAAAI,GAAAzE,WAAAyE,WAAA,SAAAE,EAAAjB,GAEA,QAAAkB,KAAmB5E,KAAAqD,YAAAsB,EADnB,OAAA5F,KAAA2E,KAAA7C,eAAA9B,KAAA4F,EAAA5F,GAAA2E,EAAA3E,GAEA4F,GAAAnE,UAAA,OAAAkD,EAAArD,OAAAwE,OAAAnB,IAAAkB,EAAApE,UAAAkD,EAAAlD,UAAA,GAAAoE,KAEAE,EAAAzG,kBAAA,EACAG,GAAAuG,cACAC,YAAA,KAqBAxG,EAAA2E,WA2CA3E,EAAAgF,OACA,IAAAD,GAAA,WAKA,QAAAA,GAAA0B,GAIAjF,KAAAkF,SAIAlF,KAAAmF,gBACAnF,KAAAoF,UAAAH,GAkXA,MA3WA1B,GAAA/C,UAAA6E,KAAA,WACA,GAAA1C,GAAA3C,KAAAkF,MAAA,MACA,UAAAvC,EACA,MAAAA,GAAA,SAGA,IAAA3C,KAAAtB,GACA,MAAAsB,MAAAqD,YAAAiC,gBAAA,IAAAtF,KAAAtB,EAGA,UAAA6G,OAAA,oDAAApE,KAAAC,UAAApB,QAQAuD,EAAA/C,UAAAyB,IAAA,SAAArB,GACA,MAAAZ,MAAAkF,MAAAtE,IAQA2C,EAAA/C,UAAAgF,IAAA,SAAA5E,EAAA6E,GACA,GAAAC,GAAA1F,KAAAiC,IAAArB,EACA4C,GAAAkC,EAAAD,IACAzF,KAAAmF,aAAArE,KAAAF,GAEAZ,KAAAkF,MAAAtE,GAAA6E,GAKAlC,EAAA/C,UAAAb,KAAA,WACA,MAAAK,MAAAkF,OAOA3B,EAAA/C,UAAA4E,UAAA,SAAAA,GACA,OAAAxE,KAAAwE,GACAA,EAAAvE,eAAAD,IACAZ,KAAAwF,IAAA5E,EAAAwE,EAAAxE,GAGA,KACA,GAAAlC,GAAA0G,EAAA,iBAAArE,MAAA,KACArC,OAAAmF,OAAA,GACA,MAAAnF,IACAsB,KAAAtB,MAGA,MAAAiH,MAOApC,EAAA/C,UAAAqE,OAAA,WACA,GAAAtD,GAAAvB,IACA,WAAAwB,SAAA,SAAAC,EAAAC,GACAH,EAAA8B,YAAAuC,wBAAArE,EAAA5B,WAAAoC,KAAA,SAAAb,GACA,MAAA4D,GAAAlC,KAAArB,EAAA8B,YAAAiC,iBAAArE,SAAAC,GAAAI,SACaS,KAAA,SAAAG,GACbX,EAAA6D,UAAAlD,GACAX,EAAA4D,gBACA1D,EAAAS,KALAX,SAMa,SAAAc,GACbX,EAAAW,QAUAkB,EAAA/C,UAAAqF,OAAA,WACA,GAAAtE,GAAAvB,IACA,WAAAwB,SAAA,SAAAC,EAAAC,GACA,GAAAoE,KACA,WAAAvE,EAAA4D,aAAAtB,WACApC,MAGAF,EAAA4D,aAAApB,QAAA,SAAAnD,GACAkF,EAAAjF,eAAAD,IAAA,MAAAA,EAAA,IAGAW,EAAA2D,MAAArE,eAAAD,KACAkF,EAAAlF,GAAAW,EAAAU,IAAArB,UAGAW,GAAA8B,YAAAuC,wBAAAE,MAAA/D,KAAA,SAAAG,GACA,MAAA4C,GAAAjC,MAAAtB,EAAA8D,QAAApE,SAAAiB,GAAAZ,SACaS,KAAA,SAAAG,GACbX,EAAA6D,UAAAlD,GACAX,EAAA4D,gBACA1D,EAAAS,KALAX,SAMa,SAAAc,GACbX,EAAAW,SAWAkB,EAAA/C,UAAAuF,KAAA,WACA,aAAA/F,KAAAtB,GACAsB,KAAA6F,SAGA7F,KAAA6E,UAMAtB,EAAA/C,UAAAwF,OAAA,WACA,MAAAhG,MAAAqD,YAAA2C,OAAAhG,KAAAtB,KAMA6E,EAAA/C,UAAAsB,MAAA,WACA,GAAAP,GAAAvB,IACA,WAAAwB,SAAA,SAAAyE,EAAAvE,GACAH,EAAA8B,YAAA6C,QAAA3E,EAAA7C,IAAAqD,KAAA,SAAAoE,GACA,GAAAjE,GAAAiE,EAAAxG,MACA4B,GAAA6D,UAAAlD,GACAX,EAAA4D,gBACAc,EAAA/D,KAJAX,SAKa,SAAAc,GACbX,EAAAW,QASAkB,EAAA/C,UAAA8B,OAAA,SAAAC,GACA,GAAAhB,GAAAvB,IACA,WAAAwB,SAAA,SAAAyE,EAAAvE,GACA,QAAAe,GAAA9C,GACAmF,EAAApF,YAAAC,GAAA2C,OAAAC,GAAAR,KAAA,SAAAG,GACA+D,EAAA/D,KADA4C,SAEiB,SAAAzC,GACjBX,EAAAW,KAIA,MAAAd,EAAA2D,MAAA,OACAzC,EAAAlB,EAAA5B,QAGA4B,EAAAO,QAAAC,KAAA,WACAU,EAAAlB,EAAA5B,aAQA4D,EAAA+B,cAAA,WACA,MAAA9G,GAAAuG,aAAAC,YAAA,IAAAhF,KAAA0E,YAMAnB,EAAA6C,iBAAA,SAAAlE,GACA,GAAAX,GAAAvB,KACAkE,KACAvD,EAAAuB,EAAA,UAAAlC,KAAA0E,WAKA,OAJA/D,GAAAoD,QAAA,SAAA7B,GACAgC,EAAApD,KAAAS,EAAA8E,aAAAnE,MAEAgC,EAAA,KAAAhC,EAAA,KACAgC,GAMAX,EAAA8C,aAAA,SAAAnE,GACA,GAAAiE,GAAA,GAAAnG,MAAAkC,EAGA,OADAiE,GAAAhB,gBACAgB,GAYA5C,EAAAqC,wBAAA,SAAAjG,EAAA2G,GACA,GAAA/E,GAAAvB,IACA,WAAAwB,SAAA,SAAAC,EAAAC,GACA,GAAAyB,EAAAxD,GAAA,CACA,OAAAsE,GAAA,EAA+BA,EAAAqC,EAAAzC,OAA+BI,IAAA,CAC9D,GAAAsC,GAAAD,EAAArC,EACA,IAAAtE,IAAA4G,EAEA,WADA9E,GAAA9B,EAAA0F,QAIAiB,EAAAxF,KAAAnB,GACAA,EAAAoG,OAAAhE,KAAA,WACAN,EAAA9B,EAAA0F,UADA1F,SAEiB,SAAA0C,GACjBX,EAAAW,SAGA,IAAAsB,MAAAC,QAAAjE,GAAA,CACA,GAAA6G,KACA7G,GAAAoE,QAAA,SAAAwC,GAA6C,MAAAC,GAAA1F,KAAAS,EAAAqE,wBAAAW,EAAAD,MAC7C9E,QAAAiF,IAAAD,GAAAzE,KAAA,SAAApB,GACAc,EAAAd,KADAa,SAEiB,SAAAa,GACjBX,EAAAW,SAGA,UAAA1C,KAAA0D,cAAAhD,OAAA,CACA,GAAAqG,MACAC,KACAC,EAAA,CACA,QAAAhG,KAAAjB,GACAA,EAAAkB,eAAAD,KACA+F,EAAAC,KAAAhG,EACA8F,EAAA5F,KAAAS,EAAAqE,wBAAAjG,EAAAiB,GAAA0F,IAGA9E,SAAAiF,IAAAC,GAAA3E,KAAA,SAAApB,GAEA,OADAuB,MACA+B,EAAA,EAAmCA,EAAAtD,EAAAkD,OAAgBI,IACnD/B,EAAAyE,EAAA1C,IAAAtD,EAAAsD,EAEAxC,GAAAS,KALAV,SAMiB,SAAAa,GACjBX,EAAAW,SAIAZ,GAAA9B,MAUA4D,EAAA2C,QAAA,SAAAxH,EAAA+B,GACA,GAAAc,GAAAvB,IACA,UAAAtB,EACA,UAAA8C,SAAA,SAAAC,EAAAC,GACAoD,EAAA7C,IAAAV,EAAA+D,gBAAA,IAAA5G,GAAA+B,cAAAa,OAAAS,KAAA,SAAAG,GACAT,EAAAF,EAAA8E,aAAAnE,MADA4C,SAEiB,SAAAzC,GACjBX,EAAAW,MAKA,UAAAkD,OAAA,eAYAhC,EAAAsD,QAAA,SAAApG,GACA,GAAAc,GAAAvB,IACA,WAAAwB,SAAA,SAAAC,EAAAC,GACAoD,EAAA7C,IAAAV,EAAA+D,iBAAA7E,cAAAa,OAAAS,KAAA,SAAAG,GACA,GAAAgC,GAAA3C,EAAA6E,iBAAAlE,EACAT,GAAAyC,KAFAY,SAGa,SAAAzC,GACbX,EAAAW,QAqBAkB,EAAAuD,OAAA,SAAAC,EAAAtG,GACA,GAAAc,GAAAvB,IACA,WAAAwB,SAAA,SAAAC,EAAAC,GACAoD,EAAA7C,IAAAV,EAAA+D,gBAAA,WAAAyB,GAAAtG,cAAAa,OAAAS,KAAA,SAAAG,GACA,IACAT,EAAAF,EAAA6E,iBAAAlE,IAEA,MAAAyD,GACAlE,EAAAF,EAAA8E,aAAAnE,OALA4C,SAOa,SAAAzC,GACbX,EAAAW,QAOAkB,EAAAyC,OAAA,SAAAtH,GACA,MAAAoG,GAAA/B,aAAA/C,KAAAsF,gBAAA,IAAA5G,GAAA4C,QAOAiC,EAAAyD,eAAA,SAAAC,GACA5G,OAAA6G,eAAAlH,KAAAQ,UAAAyG,GACAhF,IAAA,WACA,MAAAjC,MAAAiC,IAAAgF,IAEAzB,IAAA,SAAAC,GACAzF,KAAAwF,IAAAyB,EAAAxB,IAEA0B,YAAA,KAGA5D,IAEA/E,GAAA+E,SAmBA/E,EAAA2F","file":"spring.min.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/*!********************!*\\\n  !*** multi spring ***!\n  \\********************/\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(/*! ./browser.js */3);\n\n\n/***/ },\n/* 1 */\n/*!********************!*\\\n  !*** ./request.js ***!\n  \\********************/\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\tfunction buildHttpMethodFunction(method) {\n\t    /**\n\t     * make http request user fetch API.\n\t     * if path param is a complete url then fetch ues path as url,\n\t     * else path is not a complete url string but just a path then fetch url=requestConfig.baseURL+path\n\t     * url string will been auto revised, etc: http://localhost/api//user///id/ will convert to http://localhost/api/user/id\n\t     * @param path url path\n\t     */\n\t    function httpRequest(path) {\n\t        var url = path;\n\t        if (!/^https?:\\/\\/.+$/g.test(path)) {\n\t            url = exports.requestConfig.baseURL + '/' + path;\n\t        }\n\t        url = url.replace(/\\/{2,}/g, '/').replace(/:\\//g, '://');\n\t        return new Request({ url: url, method: method });\n\t    }\n\t    return httpRequest;\n\t}\n\tvar Request = (function () {\n\t    /**\n\t     * @param fetchOptions\n\t     */\n\t    function Request(fetchOptions) {\n\t        /**\n\t         * store fetch options\n\t         */\n\t        this.options = {\n\t            headers: {}\n\t        };\n\t        /**\n\t         * has this request been send\n\t         */\n\t        this.hasSend = false;\n\t        /**\n\t         * The Response interface of the Fetch API represents the response to a request.\n\t         * @see https://developer.mozilla.org/en-US/docs/Web/API/Response\n\t         */\n\t        this.response = null;\n\t        /**\n\t         * if error happen during request error will store in there,else this will be null\n\t         */\n\t        this.error = null;\n\t        Object.assign(this.options, exports.requestConfig.globalFetchOptions, fetchOptions);\n\t    }\n\t    /**\n\t     * reset query param in request url by append ? and query param to end of url\n\t     * @param obj\n\t     */\n\t    Request.prototype.queryParam = function (obj) {\n\t        if (obj != null) {\n\t            var arr = [];\n\t            for (var key in obj) {\n\t                if (obj.hasOwnProperty(key)) {\n\t                    arr.push(key + \"=\" + obj[key]);\n\t                }\n\t            }\n\t            this.options.url = this.options.url.split('?')[0] + '?' + arr.join('&');\n\t        }\n\t        return this;\n\t    };\n\t    /**\n\t     * set request body use json\n\t     * HTTP Header Content-Type will set as application/json\n\t     * @param obj\n\t     */\n\t    Request.prototype.jsonBody = function (obj) {\n\t        this.options.body = JSON.stringify(obj);\n\t        this.options.headers['Content-Type'] = 'application/json';\n\t        return this;\n\t    };\n\t    /**\n\t     * set request body as form type\n\t     * parse obj to form string\n\t     * HTTP Header Content-Type will set as application/x-www-form-urlencoded\n\t     * @param obj\n\t     */\n\t    Request.prototype.formBody = function (obj) {\n\t        var arr = [];\n\t        for (var key in obj) {\n\t            if (obj.hasOwnProperty(key)) {\n\t                arr.push(key + \"=\" + obj[key]);\n\t            }\n\t        }\n\t        this.options.body = arr.join('&');\n\t        this.options.headers['Content-Type'] = 'application/x-www-form-urlencoded';\n\t        return this;\n\t    };\n\t    /**\n\t     * send fetch request\n\t     * get response's data\n\t     * resolve:\n\t     *      if response content-type is null,then resolve null\n\t     *      if response content-type has string json,then read response data as json and resolve pure json\n\t     *      else read response data as text and resolve plain text\n\t     */\n\t    Request.prototype.send = function () {\n\t        var _this = this;\n\t        return new Promise(function (resolve, reject) {\n\t            if (_this.hasSend) {\n\t                if (_this.error == null) {\n\t                    resolve(_this.responseData);\n\t                }\n\t                else {\n\t                    reject(_this.error);\n\t                }\n\t            }\n\t            else {\n\t                _this.hasSend = true;\n\t                var fetchStartHook = exports.requestConfig.fetchStartHook, fetchEndHook_1 = exports.requestConfig.fetchEndHook;\n\t                fetchStartHook && fetchStartHook(_this);\n\t                fetch(_this.options.url, _this.options).then(function (response) {\n\t                    _this.response = response;\n\t                    var contentType = response.headers.get('content-type');\n\t                    if (contentType == null) {\n\t                        return Promise.resolve();\n\t                    }\n\t                    else {\n\t                        if (/.*json.*/.test(contentType)) {\n\t                            //noinspection JSUnresolvedFunction\n\t                            return response.json();\n\t                        }\n\t                        else {\n\t                            return response.text();\n\t                        }\n\t                    }\n\t                }).then(function (data) {\n\t                    _this.responseData = data;\n\t                    if (_this.response.ok) {\n\t                        return Promise.resolve(data);\n\t                    }\n\t                    else {\n\t                        return Promise.reject(data);\n\t                    }\n\t                }).then(function (data) {\n\t                    fetchEndHook_1 && fetchEndHook_1(_this);\n\t                    resolve(data);\n\t                }).catch(function (err) {\n\t                    _this.error = err;\n\t                    fetchEndHook_1 && fetchEndHook_1(_this);\n\t                    reject(_this);\n\t                });\n\t            }\n\t        });\n\t    };\n\t    /**\n\t     * send request follow _links's href\n\t     * resolve:\n\t     *      if response content-type is null,then resolve null\n\t     *      if response content-type has string json,then read response data as json and resolve pure json\n\t     *      else read response data as text and resolve plain text\n\t     */\n\t    Request.prototype.follow = function (keys) {\n\t        var _this = this;\n\t        var self = this;\n\t        return new Promise(function (resolve, reject) {\n\t            function doFollow(data) {\n\t                var key = keys.shift();\n\t                if (key) {\n\t                    var links = data['_links'];\n\t                    var url = links[key];\n\t                    if (url != null) {\n\t                        url = url['href'];\n\t                        exports.get(url).send().then(function (data) {\n\t                            doFollow(data);\n\t                        }).catch(function (self) {\n\t                            reject(self);\n\t                        });\n\t                    }\n\t                    else {\n\t                        self.error = \"no key=\" + key + \" in links \" + JSON.stringify(links, null, 4);\n\t                        reject(this);\n\t                    }\n\t                }\n\t                else {\n\t                    resolve(data);\n\t                }\n\t            }\n\t            _this.send().then(function (data) {\n\t                doFollow(data);\n\t            }).catch(function (self) {\n\t                reject(self);\n\t            });\n\t        });\n\t    };\n\t    return Request;\n\t}());\n\texports.Request = Request;\n\texports.requestConfig = {\n\t    globalFetchOptions: {},\n\t    baseURL: '/',\n\t    fetchStartHook: null,\n\t    fetchEndHook: null\n\t};\n\t/**\n\t * make http get request\n\t * @param path url path\n\t */\n\texports.get = buildHttpMethodFunction('GET');\n\t/**\n\t * make http post request\n\t * @param path url path\n\t */\n\texports.post = buildHttpMethodFunction('POST');\n\t/**\n\t * make http patch request\n\t * @param path url path\n\t */\n\texports.patch = buildHttpMethodFunction('PATCH');\n\t/**\n\t * make http put request\n\t * @param path url path\n\t */\n\texports.put = buildHttpMethodFunction('PUT');\n\t//noinspection ReservedWordAsName\n\t/**\n\t * make http remove request\n\t * @param path url path\n\t */\n\texports.deleteMethod = buildHttpMethodFunction('DELETE');\n\t/**\n\t * mockRequest a request with data\n\t * @param {object} data\n\t */\n\tfunction mockRequest(data) {\n\t    var url = data['_links']['self']['href'];\n\t    var req = new Request({ url: url, method: 'GET' });\n\t    req.responseData = data;\n\t    req.hasSend = true;\n\t    return req;\n\t}\n\texports.mockRequest = mockRequest;\n\t//# sourceMappingURL=request.js.map\n\n/***/ },\n/* 2 */\n/*!******************!*\\\n  !*** ./index.js ***!\n  \\******************/\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tfunction __export(m) {\n\t    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t}\n\t__export(__webpack_require__(/*! ./request */ 1));\n\t__export(__webpack_require__(/*! ./entity */ 4));\n\t//# sourceMappingURL=index.js.map\n\n/***/ },\n/* 3 */\n/*!********************!*\\\n  !*** ./browser.js ***!\n  \\********************/\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tfunction __export(m) {\n\t    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t}\n\tvar spring = __webpack_require__(/*! ./index */ 2);\n\twindow['spring'] = spring;\n\t__export(__webpack_require__(/*! ./index */ 2));\n\t//# sourceMappingURL=browser.js.map\n\n/***/ },\n/* 4 */\n/*!*******************!*\\\n  !*** ./entity.js ***!\n  \\*******************/\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar __extends = (this && this.__extends) || function (d, b) {\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n\t    function __() { this.constructor = d; }\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t};\n\tvar request = __webpack_require__(/*! ./request */ 1);\n\texports.entityConfig = {\n\t    restBaseURL: '/'\n\t};\n\t/**\n\t * any is an instanceof Entity\n\t * @param any\n\t * @returns {boolean}\n\t */\n\tfunction isEntity(any) {\n\t    if (any instanceof Object) {\n\t        var prototype = any.constructor.prototype.__proto__;\n\t        while (prototype instanceof Object) {\n\t            if (prototype.constructor === Entity) {\n\t                return true;\n\t            }\n\t            else {\n\t                prototype = prototype.__proto__;\n\t            }\n\t        }\n\t    }\n\t    return false;\n\t}\n\texports.isEntity = isEntity;\n\t/**\n\t * object deep equal,optimize for Entity\n\t * @param a\n\t * @param b\n\t * @returns {boolean} is equal ?\n\t */\n\tfunction equal(a, b) {\n\t    if (typeof a === typeof b) {\n\t        if (isEntity(a) && isEntity(b)) {\n\t            if (a.id == b.id) {\n\t                return true;\n\t            }\n\t            else {\n\t                return equal(a.data(), b.data());\n\t            }\n\t        }\n\t        else if (Array.isArray(a) && Array.isArray(b)) {\n\t            if (a.length === b.length) {\n\t                var re_1 = true;\n\t                a.forEach(function (aV, i) {\n\t                    re_1 = re_1 && equal(aV, b[i]);\n\t                });\n\t                return re_1;\n\t            }\n\t        }\n\t        else if ((a instanceof Object) && (b instanceof Object)) {\n\t            for (var key in a) {\n\t                var re = true;\n\t                if (a.hasOwnProperty(key) && b.hasOwnProperty(key)) {\n\t                    re = re && equal(a[key], b[key]);\n\t                }\n\t                else {\n\t                    return false;\n\t                }\n\t            }\n\t        }\n\t        else {\n\t            return a == b;\n\t        }\n\t    }\n\t    return false;\n\t}\n\texports.equal = equal;\n\tvar Entity = (function () {\n\t    /**\n\t     * mock an entity instance with init data\n\t     * @param initData\n\t     */\n\t    function Entity(initData) {\n\t        /**\n\t         * store one entity's data\n\t         */\n\t        this._data = {};\n\t        /**\n\t         * track modify field\n\t         */\n\t        this.modifyFields = [];\n\t        this.patchData(initData);\n\t    }\n\t    /**\n\t     * get this entity's spring data rest resource uri.\n\t     * if this entity's has data and data has _link properties,use _data['_links']['self']['href']\n\t     * else use config.restBaseURL + entityName + '/' + self.id\n\t     */\n\t    Entity.prototype.href = function () {\n\t        var links = this._data['_links'];\n\t        if (links != null) {\n\t            return links['self']['href'];\n\t        }\n\t        else {\n\t            if (this.id) {\n\t                return this.constructor.entityBaseURL() + \"/\" + this.id;\n\t            }\n\t            else {\n\t                throw new Error(\"entity without id can't map to backend service:\\n\" + JSON.stringify(this));\n\t            }\n\t        }\n\t    };\n\t    /**\n\t     * get entity properties value by key\n\t     * @param key properties name\n\t     */\n\t    Entity.prototype.get = function (key) {\n\t        return this._data[key];\n\t    };\n\t    /**\n\t     * set entity properties value by key\n\t     * will compare olaValue and newValue,if value is equal then not append filed name to modifyFields\n\t     * @param key properties name\n\t     * @param value\n\t     */\n\t    Entity.prototype.set = function (key, value) {\n\t        var oldValue = this.get(key);\n\t        if (!equal(oldValue, value)) {\n\t            this.modifyFields.push(key);\n\t        }\n\t        this._data[key] = value;\n\t    };\n\t    /**\n\t     * get entity data ref\n\t     */\n\t    Entity.prototype.data = function () {\n\t        return this._data;\n\t    };\n\t    /**\n\t     * assign a patchData object to entity's properties\n\t     * if patchData has self link, then id will update by parseIdFromData\n\t     * @param patchData\n\t     */\n\t    Entity.prototype.patchData = function (patchData) {\n\t        for (var key in patchData) {\n\t            if (patchData.hasOwnProperty(key)) {\n\t                this.set(key, patchData[key]);\n\t            }\n\t        }\n\t        try {\n\t            var id = patchData['_links']['self']['href'].split(/\\//);\n\t            id = id[id.length - 1];\n\t            if (id != null) {\n\t                this.id = id;\n\t            }\n\t        }\n\t        catch (_) {\n\t        }\n\t    };\n\t    /**\n\t     * create an new entity\n\t     * send HTTP POST request to create an entity\n\t     */\n\t    Entity.prototype.create = function () {\n\t        var _this = this;\n\t        return new Promise(function (resolve, reject) {\n\t            _this.constructor.translateRelationEntity(_this.data(), []).then(function (body) {\n\t                return request.post(_this.constructor.entityBaseURL()).jsonBody(body).send();\n\t            }).then(function (json) {\n\t                _this.patchData(json);\n\t                _this.modifyFields = [];\n\t                resolve(json);\n\t            }).catch(function (err) {\n\t                reject(err);\n\t            });\n\t        });\n\t    };\n\t    /**\n\t     * update an entity\n\t     * send HTTP PATCH request to update an entity(will watch change in data properties to track change fields)\n\t     * @returns {Promise} resolve(json), reject(Request)\n\t     * @private\n\t     */\n\t    Entity.prototype.update = function () {\n\t        var _this = this;\n\t        return new Promise(function (resolve, reject) {\n\t            var pureChange = {};\n\t            if (_this.modifyFields.length == 0) {\n\t                resolve();\n\t                return;\n\t            }\n\t            _this.modifyFields.forEach(function (key) {\n\t                if (pureChange.hasOwnProperty(key) || key[0] === '_') {\n\t                    return;\n\t                }\n\t                else if (_this._data.hasOwnProperty(key)) {\n\t                    pureChange[key] = _this.get(key);\n\t                }\n\t            });\n\t            _this.constructor.translateRelationEntity(pureChange, []).then(function (json) {\n\t                return request.patch(_this.href()).jsonBody(json).send();\n\t            }).then(function (json) {\n\t                _this.patchData(json);\n\t                _this.modifyFields = [];\n\t                resolve(json);\n\t            }).catch(function (err) {\n\t                reject(err);\n\t            });\n\t        });\n\t    };\n\t    /**\n\t     * create or update entity\n\t     * if id properties is set update change to service,\n\t     * else create an new entity to service.\n\t     *\n\t     * if entity.properties is an instance of Entity or Entity[],then entity.properties.save() will also call,which mean entity's all Entity attr will auto save()\n\t     */\n\t    Entity.prototype.save = function () {\n\t        if (this.id != null) {\n\t            return this.update();\n\t        }\n\t        else {\n\t            return this.create();\n\t        }\n\t    };\n\t    /**\n\t     * remove this entity\n\t     */\n\t    Entity.prototype.remove = function () {\n\t        return this.constructor.remove(this.id);\n\t    };\n\t    /**\n\t     * fetch entity data to keep updated to newest\n\t     * @returns {Promise} resolve(json), reject(Request)\n\t     */\n\t    Entity.prototype.fetch = function () {\n\t        var _this = this;\n\t        return new Promise(function (resole, reject) {\n\t            _this.constructor.findOne(_this.id).then(function (entity) {\n\t                var json = entity.data();\n\t                _this.patchData(json);\n\t                _this.modifyFields = [];\n\t                resole(json);\n\t            }).catch(function (err) {\n\t                reject(err);\n\t            });\n\t        });\n\t    };\n\t    /**\n\t     * send request follow this entity's _links's href\n\t     * @param {string[]} keys links href in order\n\t     * @returns {Promise} resolve(json), reject(Request)\n\t     */\n\t    Entity.prototype.follow = function (keys) {\n\t        var _this = this;\n\t        return new Promise(function (resole, reject) {\n\t            function doFollow(data) {\n\t                request.mockRequest(data).follow(keys).then(function (json) {\n\t                    resole(json);\n\t                }).catch(function (err) {\n\t                    reject(err);\n\t                });\n\t            }\n\t            //fetch data before doFollow\n\t            if (_this._data['_links'] != null) {\n\t                doFollow(_this.data());\n\t            }\n\t            else {\n\t                _this.fetch().then(function () {\n\t                    doFollow(_this.data());\n\t                });\n\t            }\n\t        });\n\t    };\n\t    /**\n\t     * spring data rest entity base url\n\t     */\n\t    Entity.entityBaseURL = function () {\n\t        return exports.entityConfig.restBaseURL + \"/\" + this.entityName;\n\t    };\n\t    /**\n\t     * read spring data rest's response json data then parse and return entity array\n\t     * @param json\n\t     */\n\t    Entity.jsonToEntityList = function (json) {\n\t        var _this = this;\n\t        var re = [];\n\t        var arr = json['_embedded'][this.entityName];\n\t        arr.forEach(function (json) {\n\t            re.push(_this.jsonToEntity(json));\n\t        });\n\t        re['page'] = json['page']; //add page info\n\t        return re;\n\t    };\n\t    /**\n\t     * read spring data rest's response json data then parse and return an entity\n\t     * @param json\n\t     */\n\t    Entity.jsonToEntity = function (json) {\n\t        var entity = new this(json);\n\t        //json data from server is fresh,so entity modifyFields should be empty\n\t        entity.modifyFields = [];\n\t        return entity;\n\t    };\n\t    /**\n\t     * this method use before send request to service to create or update entity\n\t     * translate entity's data properties which contain Relation Entity instance value to text-uri list\n\t     * if data has Entity attr,this Entity attr will be replace by is href() value,and if this entity has't be store in service will store this entity first.\n\t     * @param data entity's data properties can has Entity attr\n\t     * @param hasVisitedEntities track has visited entity for circle ref issue,init value should be []\n\t     *\n\t     * resolve: pure json data can send to spring data rest service as request body\n\t     * reject: Request with error prop\n\t     */\n\t    Entity.translateRelationEntity = function (data, hasVisitedEntities) {\n\t        var _this = this;\n\t        return new Promise(function (resolve, reject) {\n\t            if (isEntity(data)) {\n\t                for (var i = 0; i < hasVisitedEntities.length; i++) {\n\t                    var one = hasVisitedEntities[i];\n\t                    if (data === one) {\n\t                        resolve(data.href());\n\t                        return;\n\t                    }\n\t                }\n\t                hasVisitedEntities.push(data);\n\t                data.save().then(function () {\n\t                    resolve(data.href());\n\t                }).catch(function (err) {\n\t                    reject(err);\n\t                });\n\t            }\n\t            else if (Array.isArray(data)) {\n\t                var promiseList_1 = [];\n\t                data.forEach(function (one) { return promiseList_1.push(_this.translateRelationEntity(one, hasVisitedEntities)); });\n\t                Promise.all(promiseList_1).then(function (arr) {\n\t                    resolve(arr);\n\t                }).catch(function (err) {\n\t                    reject(err);\n\t                });\n\t            }\n\t            else if (data != null && data.constructor === Object) {\n\t                var promiseList = [];\n\t                var indexKeyMap_1 = {};\n\t                var nowIndex = 0;\n\t                for (var key in data) {\n\t                    if (data.hasOwnProperty(key)) {\n\t                        indexKeyMap_1[nowIndex++] = key;\n\t                        promiseList.push(_this.translateRelationEntity(data[key], hasVisitedEntities));\n\t                    }\n\t                }\n\t                Promise.all(promiseList).then(function (arr) {\n\t                    var json = {};\n\t                    for (var i = 0; i < arr.length; i++) {\n\t                        json[indexKeyMap_1[i]] = arr[i];\n\t                    }\n\t                    resolve(json);\n\t                }).catch(function (err) {\n\t                    reject(err);\n\t                });\n\t            }\n\t            else {\n\t                resolve(data);\n\t            }\n\t        });\n\t    };\n\t    /**\n\t     * get entity json data by id\n\t     * @param {string|number} id entity id\n\t     * @param {object?} queryParam\n\t     * @param {string} queryParam.projection the name of the projection you set with @Projection annotation name attributes\n\t     */\n\t    Entity.findOne = function (id, queryParam) {\n\t        var _this = this;\n\t        if (id != null) {\n\t            return new Promise(function (resolve, reject) {\n\t                request.get(_this.entityBaseURL() + \"/\" + id).queryParam(queryParam).send().then(function (json) {\n\t                    resolve(_this.jsonToEntity(json));\n\t                }).catch(function (err) {\n\t                    reject(err);\n\t                });\n\t            });\n\t        }\n\t        else {\n\t            throw new Error('require id');\n\t        }\n\t    };\n\t    /**\n\t     * collection resource with page and sort.\n\t     * Returns all entities the repository servers through its findAll(…) method. If the repository is a paging repository we include the pagination links if necessary and additional page metadata.*\n\t     * @param {object} queryParam\n\t     * @param {number} queryParam.page the page number to access (0 indexed, defaults to 0).\n\t     * @param {number} queryParam.size the page size requested (defaults to 20).\n\t     * @param {string} queryParam.sort a collection of sort directives in the format ($propertyName,)+[asc|desc]?\n\t     * etc:name,age,desc\n\t     */\n\t    Entity.findAll = function (queryParam) {\n\t        var _this = this;\n\t        return new Promise(function (resolve, reject) {\n\t            request.get(_this.entityBaseURL()).queryParam(queryParam).send().then(function (json) {\n\t                var re = _this.jsonToEntityList(json);\n\t                resolve(re);\n\t            }).catch(function (err) {\n\t                reject(err);\n\t            });\n\t        });\n\t    };\n\t    /**\n\t     * search resource if the backing repository exposes query methods.\n\t     * call query methods exposed by a repository. The path and name of the query method resources can be modified using @RestResource on the method declaration.\n\t     *\n\t     * @param {string} searchPath spring data rest searchMethod path string\n\t     *\n\t     * @param {Object} queryParam search params\n\t     * If the query method has pagination capabilities (indicated in the URI template pointing to the resource) the resource takes the following parameters:\n\t     * @param {number} queryParam.page the page number to access (0 indexed, defaults to 0).\n\t     * @param {number} queryParam.size the page size requested (defaults to 20).\n\t     * @param {string} queryParam.sort a collection of sort directives in the format ($propertyName,)+[asc|desc]?\n\t     *\n\t     * @returns {Promise} resolve(Entity|Entity[]) reject(Request)\n\t     * resolve:\n\t     *      if response json data has _embedded attr then resolve Entity array,\n\t     *      else resolve one Entity\n\t     */\n\t    Entity.search = function (searchPath, queryParam) {\n\t        var _this = this;\n\t        return new Promise(function (resolve, reject) {\n\t            request.get(_this.entityBaseURL() + \"/search/\" + searchPath).queryParam(queryParam).send().then(function (json) {\n\t                try {\n\t                    resolve(_this.jsonToEntityList(json));\n\t                }\n\t                catch (_) {\n\t                    resolve(_this.jsonToEntity(json));\n\t                }\n\t            }).catch(function (err) {\n\t                reject(err);\n\t            });\n\t        });\n\t    };\n\t    /**\n\t     * remove entity by id\n\t     */\n\t    Entity.remove = function (id) {\n\t        return request.deleteMethod(this.entityBaseURL() + \"/\" + id).send();\n\t    };\n\t    /**\n\t     * expose entity instance properties in _data to entity itself use Object.defineProperty getter and setter\n\t     * after expose,you can access property in entity by entity.property rather than access by entity.data().property\n\t     * @param propertyName property name in entity.data() object.\n\t     */\n\t    Entity.exposeProperty = function (propertyName) {\n\t        Object.defineProperty(this.prototype, propertyName, {\n\t            get: function () {\n\t                return this.get(propertyName);\n\t            },\n\t            set: function (value) {\n\t                this.set(propertyName, value);\n\t            },\n\t            enumerable: true\n\t        });\n\t    };\n\t    return Entity;\n\t}());\n\texports.Entity = Entity;\n\t/**\n\t * build an Entity Entity\n\t * @param entity_name spring data rest entity path\n\t */\n\tfunction extend(entity_name) {\n\t    var Class = (function (_super) {\n\t        __extends(Class, _super);\n\t        function Class() {\n\t            _super.apply(this, arguments);\n\t        }\n\t        return Class;\n\t    }(Entity));\n\t    /**\n\t     * spring data rest entity path\n\t     */\n\t    Class.entityName = entity_name;\n\t    return Class;\n\t}\n\texports.extend = extend;\n\t//# sourceMappingURL=entity.js.map\n\n/***/ }\n/******/ ]);\n\n\n/** WEBPACK FOOTER **\n ** spring.min.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 68c0886585ad1ad5667b\n **/","\"use strict\";\nfunction buildHttpMethodFunction(method) {\n    /**\n     * make http request user fetch API.\n     * if path param is a complete url then fetch ues path as url,\n     * else path is not a complete url string but just a path then fetch url=requestConfig.baseURL+path\n     * url string will been auto revised, etc: http://localhost/api//user///id/ will convert to http://localhost/api/user/id\n     * @param path url path\n     */\n    function httpRequest(path) {\n        var url = path;\n        if (!/^https?:\\/\\/.+$/g.test(path)) {\n            url = exports.requestConfig.baseURL + '/' + path;\n        }\n        url = url.replace(/\\/{2,}/g, '/').replace(/:\\//g, '://');\n        return new Request({ url: url, method: method });\n    }\n    return httpRequest;\n}\nvar Request = (function () {\n    /**\n     * @param fetchOptions\n     */\n    function Request(fetchOptions) {\n        /**\n         * store fetch options\n         */\n        this.options = {\n            headers: {}\n        };\n        /**\n         * has this request been send\n         */\n        this.hasSend = false;\n        /**\n         * The Response interface of the Fetch API represents the response to a request.\n         * @see https://developer.mozilla.org/en-US/docs/Web/API/Response\n         */\n        this.response = null;\n        /**\n         * if error happen during request error will store in there,else this will be null\n         */\n        this.error = null;\n        Object.assign(this.options, exports.requestConfig.globalFetchOptions, fetchOptions);\n    }\n    /**\n     * reset query param in request url by append ? and query param to end of url\n     * @param obj\n     */\n    Request.prototype.queryParam = function (obj) {\n        if (obj != null) {\n            var arr = [];\n            for (var key in obj) {\n                if (obj.hasOwnProperty(key)) {\n                    arr.push(key + \"=\" + obj[key]);\n                }\n            }\n            this.options.url = this.options.url.split('?')[0] + '?' + arr.join('&');\n        }\n        return this;\n    };\n    /**\n     * set request body use json\n     * HTTP Header Content-Type will set as application/json\n     * @param obj\n     */\n    Request.prototype.jsonBody = function (obj) {\n        this.options.body = JSON.stringify(obj);\n        this.options.headers['Content-Type'] = 'application/json';\n        return this;\n    };\n    /**\n     * set request body as form type\n     * parse obj to form string\n     * HTTP Header Content-Type will set as application/x-www-form-urlencoded\n     * @param obj\n     */\n    Request.prototype.formBody = function (obj) {\n        var arr = [];\n        for (var key in obj) {\n            if (obj.hasOwnProperty(key)) {\n                arr.push(key + \"=\" + obj[key]);\n            }\n        }\n        this.options.body = arr.join('&');\n        this.options.headers['Content-Type'] = 'application/x-www-form-urlencoded';\n        return this;\n    };\n    /**\n     * send fetch request\n     * get response's data\n     * resolve:\n     *      if response content-type is null,then resolve null\n     *      if response content-type has string json,then read response data as json and resolve pure json\n     *      else read response data as text and resolve plain text\n     */\n    Request.prototype.send = function () {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            if (_this.hasSend) {\n                if (_this.error == null) {\n                    resolve(_this.responseData);\n                }\n                else {\n                    reject(_this.error);\n                }\n            }\n            else {\n                _this.hasSend = true;\n                var fetchStartHook = exports.requestConfig.fetchStartHook, fetchEndHook_1 = exports.requestConfig.fetchEndHook;\n                fetchStartHook && fetchStartHook(_this);\n                fetch(_this.options.url, _this.options).then(function (response) {\n                    _this.response = response;\n                    var contentType = response.headers.get('content-type');\n                    if (contentType == null) {\n                        return Promise.resolve();\n                    }\n                    else {\n                        if (/.*json.*/.test(contentType)) {\n                            //noinspection JSUnresolvedFunction\n                            return response.json();\n                        }\n                        else {\n                            return response.text();\n                        }\n                    }\n                }).then(function (data) {\n                    _this.responseData = data;\n                    if (_this.response.ok) {\n                        return Promise.resolve(data);\n                    }\n                    else {\n                        return Promise.reject(data);\n                    }\n                }).then(function (data) {\n                    fetchEndHook_1 && fetchEndHook_1(_this);\n                    resolve(data);\n                }).catch(function (err) {\n                    _this.error = err;\n                    fetchEndHook_1 && fetchEndHook_1(_this);\n                    reject(_this);\n                });\n            }\n        });\n    };\n    /**\n     * send request follow _links's href\n     * resolve:\n     *      if response content-type is null,then resolve null\n     *      if response content-type has string json,then read response data as json and resolve pure json\n     *      else read response data as text and resolve plain text\n     */\n    Request.prototype.follow = function (keys) {\n        var _this = this;\n        var self = this;\n        return new Promise(function (resolve, reject) {\n            function doFollow(data) {\n                var key = keys.shift();\n                if (key) {\n                    var links = data['_links'];\n                    var url = links[key];\n                    if (url != null) {\n                        url = url['href'];\n                        exports.get(url).send().then(function (data) {\n                            doFollow(data);\n                        }).catch(function (self) {\n                            reject(self);\n                        });\n                    }\n                    else {\n                        self.error = \"no key=\" + key + \" in links \" + JSON.stringify(links, null, 4);\n                        reject(this);\n                    }\n                }\n                else {\n                    resolve(data);\n                }\n            }\n            _this.send().then(function (data) {\n                doFollow(data);\n            }).catch(function (self) {\n                reject(self);\n            });\n        });\n    };\n    return Request;\n}());\nexports.Request = Request;\nexports.requestConfig = {\n    globalFetchOptions: {},\n    baseURL: '/',\n    fetchStartHook: null,\n    fetchEndHook: null\n};\n/**\n * make http get request\n * @param path url path\n */\nexports.get = buildHttpMethodFunction('GET');\n/**\n * make http post request\n * @param path url path\n */\nexports.post = buildHttpMethodFunction('POST');\n/**\n * make http patch request\n * @param path url path\n */\nexports.patch = buildHttpMethodFunction('PATCH');\n/**\n * make http put request\n * @param path url path\n */\nexports.put = buildHttpMethodFunction('PUT');\n//noinspection ReservedWordAsName\n/**\n * make http remove request\n * @param path url path\n */\nexports.deleteMethod = buildHttpMethodFunction('DELETE');\n/**\n * mockRequest a request with data\n * @param {object} data\n */\nfunction mockRequest(data) {\n    var url = data['_links']['self']['href'];\n    var req = new Request({ url: url, method: 'GET' });\n    req.responseData = data;\n    req.hasSend = true;\n    return req;\n}\nexports.mockRequest = mockRequest;\n//# sourceMappingURL=request.js.map\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./request.js\n ** module id = 1\n ** module chunks = 0 1\n **/","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\n__export(require('./request'));\n__export(require('./entity'));\n//# sourceMappingURL=index.js.map\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./index.js\n ** module id = 2\n ** module chunks = 0\n **/","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nvar spring = require('./index');\nwindow['spring'] = spring;\n__export(require('./index'));\n//# sourceMappingURL=browser.js.map\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./browser.js\n ** module id = 3\n ** module chunks = 0\n **/","\"use strict\";\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar request = require('./request');\nexports.entityConfig = {\n    restBaseURL: '/'\n};\n/**\n * any is an instanceof Entity\n * @param any\n * @returns {boolean}\n */\nfunction isEntity(any) {\n    if (any instanceof Object) {\n        var prototype = any.constructor.prototype.__proto__;\n        while (prototype instanceof Object) {\n            if (prototype.constructor === Entity) {\n                return true;\n            }\n            else {\n                prototype = prototype.__proto__;\n            }\n        }\n    }\n    return false;\n}\nexports.isEntity = isEntity;\n/**\n * object deep equal,optimize for Entity\n * @param a\n * @param b\n * @returns {boolean} is equal ?\n */\nfunction equal(a, b) {\n    if (typeof a === typeof b) {\n        if (isEntity(a) && isEntity(b)) {\n            if (a.id == b.id) {\n                return true;\n            }\n            else {\n                return equal(a.data(), b.data());\n            }\n        }\n        else if (Array.isArray(a) && Array.isArray(b)) {\n            if (a.length === b.length) {\n                var re_1 = true;\n                a.forEach(function (aV, i) {\n                    re_1 = re_1 && equal(aV, b[i]);\n                });\n                return re_1;\n            }\n        }\n        else if ((a instanceof Object) && (b instanceof Object)) {\n            for (var key in a) {\n                var re = true;\n                if (a.hasOwnProperty(key) && b.hasOwnProperty(key)) {\n                    re = re && equal(a[key], b[key]);\n                }\n                else {\n                    return false;\n                }\n            }\n        }\n        else {\n            return a == b;\n        }\n    }\n    return false;\n}\nexports.equal = equal;\nvar Entity = (function () {\n    /**\n     * mock an entity instance with init data\n     * @param initData\n     */\n    function Entity(initData) {\n        /**\n         * store one entity's data\n         */\n        this._data = {};\n        /**\n         * track modify field\n         */\n        this.modifyFields = [];\n        this.patchData(initData);\n    }\n    /**\n     * get this entity's spring data rest resource uri.\n     * if this entity's has data and data has _link properties,use _data['_links']['self']['href']\n     * else use config.restBaseURL + entityName + '/' + self.id\n     */\n    Entity.prototype.href = function () {\n        var links = this._data['_links'];\n        if (links != null) {\n            return links['self']['href'];\n        }\n        else {\n            if (this.id) {\n                return this.constructor.entityBaseURL() + \"/\" + this.id;\n            }\n            else {\n                throw new Error(\"entity without id can't map to backend service:\\n\" + JSON.stringify(this));\n            }\n        }\n    };\n    /**\n     * get entity properties value by key\n     * @param key properties name\n     */\n    Entity.prototype.get = function (key) {\n        return this._data[key];\n    };\n    /**\n     * set entity properties value by key\n     * will compare olaValue and newValue,if value is equal then not append filed name to modifyFields\n     * @param key properties name\n     * @param value\n     */\n    Entity.prototype.set = function (key, value) {\n        var oldValue = this.get(key);\n        if (!equal(oldValue, value)) {\n            this.modifyFields.push(key);\n        }\n        this._data[key] = value;\n    };\n    /**\n     * get entity data ref\n     */\n    Entity.prototype.data = function () {\n        return this._data;\n    };\n    /**\n     * assign a patchData object to entity's properties\n     * if patchData has self link, then id will update by parseIdFromData\n     * @param patchData\n     */\n    Entity.prototype.patchData = function (patchData) {\n        for (var key in patchData) {\n            if (patchData.hasOwnProperty(key)) {\n                this.set(key, patchData[key]);\n            }\n        }\n        try {\n            var id = patchData['_links']['self']['href'].split(/\\//);\n            id = id[id.length - 1];\n            if (id != null) {\n                this.id = id;\n            }\n        }\n        catch (_) {\n        }\n    };\n    /**\n     * create an new entity\n     * send HTTP POST request to create an entity\n     */\n    Entity.prototype.create = function () {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            _this.constructor.translateRelationEntity(_this.data(), []).then(function (body) {\n                return request.post(_this.constructor.entityBaseURL()).jsonBody(body).send();\n            }).then(function (json) {\n                _this.patchData(json);\n                _this.modifyFields = [];\n                resolve(json);\n            }).catch(function (err) {\n                reject(err);\n            });\n        });\n    };\n    /**\n     * update an entity\n     * send HTTP PATCH request to update an entity(will watch change in data properties to track change fields)\n     * @returns {Promise} resolve(json), reject(Request)\n     * @private\n     */\n    Entity.prototype.update = function () {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            var pureChange = {};\n            if (_this.modifyFields.length == 0) {\n                resolve();\n                return;\n            }\n            _this.modifyFields.forEach(function (key) {\n                if (pureChange.hasOwnProperty(key) || key[0] === '_') {\n                    return;\n                }\n                else if (_this._data.hasOwnProperty(key)) {\n                    pureChange[key] = _this.get(key);\n                }\n            });\n            _this.constructor.translateRelationEntity(pureChange, []).then(function (json) {\n                return request.patch(_this.href()).jsonBody(json).send();\n            }).then(function (json) {\n                _this.patchData(json);\n                _this.modifyFields = [];\n                resolve(json);\n            }).catch(function (err) {\n                reject(err);\n            });\n        });\n    };\n    /**\n     * create or update entity\n     * if id properties is set update change to service,\n     * else create an new entity to service.\n     *\n     * if entity.properties is an instance of Entity or Entity[],then entity.properties.save() will also call,which mean entity's all Entity attr will auto save()\n     */\n    Entity.prototype.save = function () {\n        if (this.id != null) {\n            return this.update();\n        }\n        else {\n            return this.create();\n        }\n    };\n    /**\n     * remove this entity\n     */\n    Entity.prototype.remove = function () {\n        return this.constructor.remove(this.id);\n    };\n    /**\n     * fetch entity data to keep updated to newest\n     * @returns {Promise} resolve(json), reject(Request)\n     */\n    Entity.prototype.fetch = function () {\n        var _this = this;\n        return new Promise(function (resole, reject) {\n            _this.constructor.findOne(_this.id).then(function (entity) {\n                var json = entity.data();\n                _this.patchData(json);\n                _this.modifyFields = [];\n                resole(json);\n            }).catch(function (err) {\n                reject(err);\n            });\n        });\n    };\n    /**\n     * send request follow this entity's _links's href\n     * @param {string[]} keys links href in order\n     * @returns {Promise} resolve(json), reject(Request)\n     */\n    Entity.prototype.follow = function (keys) {\n        var _this = this;\n        return new Promise(function (resole, reject) {\n            function doFollow(data) {\n                request.mockRequest(data).follow(keys).then(function (json) {\n                    resole(json);\n                }).catch(function (err) {\n                    reject(err);\n                });\n            }\n            //fetch data before doFollow\n            if (_this._data['_links'] != null) {\n                doFollow(_this.data());\n            }\n            else {\n                _this.fetch().then(function () {\n                    doFollow(_this.data());\n                });\n            }\n        });\n    };\n    /**\n     * spring data rest entity base url\n     */\n    Entity.entityBaseURL = function () {\n        return exports.entityConfig.restBaseURL + \"/\" + this.entityName;\n    };\n    /**\n     * read spring data rest's response json data then parse and return entity array\n     * @param json\n     */\n    Entity.jsonToEntityList = function (json) {\n        var _this = this;\n        var re = [];\n        var arr = json['_embedded'][this.entityName];\n        arr.forEach(function (json) {\n            re.push(_this.jsonToEntity(json));\n        });\n        re['page'] = json['page']; //add page info\n        return re;\n    };\n    /**\n     * read spring data rest's response json data then parse and return an entity\n     * @param json\n     */\n    Entity.jsonToEntity = function (json) {\n        var entity = new this(json);\n        //json data from server is fresh,so entity modifyFields should be empty\n        entity.modifyFields = [];\n        return entity;\n    };\n    /**\n     * this method use before send request to service to create or update entity\n     * translate entity's data properties which contain Relation Entity instance value to text-uri list\n     * if data has Entity attr,this Entity attr will be replace by is href() value,and if this entity has't be store in service will store this entity first.\n     * @param data entity's data properties can has Entity attr\n     * @param hasVisitedEntities track has visited entity for circle ref issue,init value should be []\n     *\n     * resolve: pure json data can send to spring data rest service as request body\n     * reject: Request with error prop\n     */\n    Entity.translateRelationEntity = function (data, hasVisitedEntities) {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            if (isEntity(data)) {\n                for (var i = 0; i < hasVisitedEntities.length; i++) {\n                    var one = hasVisitedEntities[i];\n                    if (data === one) {\n                        resolve(data.href());\n                        return;\n                    }\n                }\n                hasVisitedEntities.push(data);\n                data.save().then(function () {\n                    resolve(data.href());\n                }).catch(function (err) {\n                    reject(err);\n                });\n            }\n            else if (Array.isArray(data)) {\n                var promiseList_1 = [];\n                data.forEach(function (one) { return promiseList_1.push(_this.translateRelationEntity(one, hasVisitedEntities)); });\n                Promise.all(promiseList_1).then(function (arr) {\n                    resolve(arr);\n                }).catch(function (err) {\n                    reject(err);\n                });\n            }\n            else if (data != null && data.constructor === Object) {\n                var promiseList = [];\n                var indexKeyMap_1 = {};\n                var nowIndex = 0;\n                for (var key in data) {\n                    if (data.hasOwnProperty(key)) {\n                        indexKeyMap_1[nowIndex++] = key;\n                        promiseList.push(_this.translateRelationEntity(data[key], hasVisitedEntities));\n                    }\n                }\n                Promise.all(promiseList).then(function (arr) {\n                    var json = {};\n                    for (var i = 0; i < arr.length; i++) {\n                        json[indexKeyMap_1[i]] = arr[i];\n                    }\n                    resolve(json);\n                }).catch(function (err) {\n                    reject(err);\n                });\n            }\n            else {\n                resolve(data);\n            }\n        });\n    };\n    /**\n     * get entity json data by id\n     * @param {string|number} id entity id\n     * @param {object?} queryParam\n     * @param {string} queryParam.projection the name of the projection you set with @Projection annotation name attributes\n     */\n    Entity.findOne = function (id, queryParam) {\n        var _this = this;\n        if (id != null) {\n            return new Promise(function (resolve, reject) {\n                request.get(_this.entityBaseURL() + \"/\" + id).queryParam(queryParam).send().then(function (json) {\n                    resolve(_this.jsonToEntity(json));\n                }).catch(function (err) {\n                    reject(err);\n                });\n            });\n        }\n        else {\n            throw new Error('require id');\n        }\n    };\n    /**\n     * collection resource with page and sort.\n     * Returns all entities the repository servers through its findAll(…) method. If the repository is a paging repository we include the pagination links if necessary and additional page metadata.*\n     * @param {object} queryParam\n     * @param {number} queryParam.page the page number to access (0 indexed, defaults to 0).\n     * @param {number} queryParam.size the page size requested (defaults to 20).\n     * @param {string} queryParam.sort a collection of sort directives in the format ($propertyName,)+[asc|desc]?\n     * etc:name,age,desc\n     */\n    Entity.findAll = function (queryParam) {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            request.get(_this.entityBaseURL()).queryParam(queryParam).send().then(function (json) {\n                var re = _this.jsonToEntityList(json);\n                resolve(re);\n            }).catch(function (err) {\n                reject(err);\n            });\n        });\n    };\n    /**\n     * search resource if the backing repository exposes query methods.\n     * call query methods exposed by a repository. The path and name of the query method resources can be modified using @RestResource on the method declaration.\n     *\n     * @param {string} searchPath spring data rest searchMethod path string\n     *\n     * @param {Object} queryParam search params\n     * If the query method has pagination capabilities (indicated in the URI template pointing to the resource) the resource takes the following parameters:\n     * @param {number} queryParam.page the page number to access (0 indexed, defaults to 0).\n     * @param {number} queryParam.size the page size requested (defaults to 20).\n     * @param {string} queryParam.sort a collection of sort directives in the format ($propertyName,)+[asc|desc]?\n     *\n     * @returns {Promise} resolve(Entity|Entity[]) reject(Request)\n     * resolve:\n     *      if response json data has _embedded attr then resolve Entity array,\n     *      else resolve one Entity\n     */\n    Entity.search = function (searchPath, queryParam) {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            request.get(_this.entityBaseURL() + \"/search/\" + searchPath).queryParam(queryParam).send().then(function (json) {\n                try {\n                    resolve(_this.jsonToEntityList(json));\n                }\n                catch (_) {\n                    resolve(_this.jsonToEntity(json));\n                }\n            }).catch(function (err) {\n                reject(err);\n            });\n        });\n    };\n    /**\n     * remove entity by id\n     */\n    Entity.remove = function (id) {\n        return request.deleteMethod(this.entityBaseURL() + \"/\" + id).send();\n    };\n    /**\n     * expose entity instance properties in _data to entity itself use Object.defineProperty getter and setter\n     * after expose,you can access property in entity by entity.property rather than access by entity.data().property\n     * @param propertyName property name in entity.data() object.\n     */\n    Entity.exposeProperty = function (propertyName) {\n        Object.defineProperty(this.prototype, propertyName, {\n            get: function () {\n                return this.get(propertyName);\n            },\n            set: function (value) {\n                this.set(propertyName, value);\n            },\n            enumerable: true\n        });\n    };\n    return Entity;\n}());\nexports.Entity = Entity;\n/**\n * build an Entity Entity\n * @param entity_name spring data rest entity path\n */\nfunction extend(entity_name) {\n    var Class = (function (_super) {\n        __extends(Class, _super);\n        function Class() {\n            _super.apply(this, arguments);\n        }\n        return Class;\n    }(Entity));\n    /**\n     * spring data rest entity path\n     */\n    Class.entityName = entity_name;\n    return Class;\n}\nexports.extend = extend;\n//# sourceMappingURL=entity.js.map\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./entity.js\n ** module id = 4\n ** module chunks = 0\n **/"],"sourceRoot":""}